generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id          String        @id @default(uuid())
  name        String
  email       String        @unique
  password    String
  projects    Project[]
  workEntries WorkSession[]
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

model Project {
  id          String        @id @default(uuid())
  name        String
  description String?
  type        ProjectType   @default(PERSONAL)
  userId      String
  user        User          @relation(fields: [userId], references: [id])
  workEntries WorkSession[]
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

model WorkSession {
  id     String @id @default(uuid())
  userId String
  user   User   @relation(fields: [userId], references: [id])

  projectId String?
  project   Project? @relation(fields: [projectId], references: [id])

  startTime DateTime
  endTime   DateTime?

  workspace WorkspaceType @default(OFFICE)
  notes     String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum WorkspaceType {
  OFFICE
  HOME_OFFICE
}

enum ProjectType {
  PERSONAL
  OFFICE
  CLIENT
}
